"""
åˆå§‹åŒ–Promptæ¨¡æ¿æ•°æ®

è¿è¡Œæ–¹å¼:
python init_prompt_templates.py
"""

import os
import django

# è®¾ç½®Djangoç¯å¢ƒ
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'middle_school_system.settings')
django.setup()

from apps.ai_services.models import PromptTemplate


def create_prompt_templates():
    """åˆ›å»ºæ‰€æœ‰Promptæ¨¡æ¿"""
    
    templates = [
        # 1. è¯­æ–‡çŸ¥è¯†ç‚¹æ€»ç»“æ¨¡æ¿
        {
            'template_type': 'knowledge_summary',
            'subject': 'chinese',
            'template_name': 'è¯­æ–‡çŸ¥è¯†ç‚¹æ€»ç»“V1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­è¯­æ–‡æ•™å¸ˆï¼Œæ‹¥æœ‰20å¹´æ•™å­¦ç»éªŒã€‚è¯·é’ˆå¯¹{grade}{course_name}è¿™ä¸€è¯¾ï¼Œç”Ÿæˆè¯¦ç»†çš„çŸ¥è¯†ç‚¹æ€»ç»“ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚æ•™å­¦å¤§çº²è¦æ±‚
2. çŸ¥è¯†ç‚¹ç»“æ„æ¸…æ™°ï¼Œä½¿ç”¨Markdownæ ¼å¼
3. åŒ…å«ä»¥ä¸‹æ¿å—ï¼š
   - **è¯¾æ–‡ä¸»æ—¨**ï¼šç”¨2-3å¥è¯æ¦‚æ‹¬
   - **ä½œè€…ä»‹ç»**ï¼šç®€è¦ä»‹ç»ä½œè€…ç”Ÿå¹³åŠå†™ä½œèƒŒæ™¯
   - **é‡ç‚¹å­—è¯**ï¼šåˆ—å‡º5-10ä¸ªé‡ç‚¹å­—è¯ï¼Œæ ‡æ³¨æ‹¼éŸ³å’Œé‡Šä¹‰
   - **æ–‡ç« ç»“æ„**ï¼šæ¢³ç†æ–‡ç« è„‰ç»œ
   - **å†™ä½œæ‰‹æ³•**ï¼šåˆ†æä¸»è¦ä¿®è¾æ‰‹æ³•å’Œè¡¨ç°æ‰‹æ³•
   - **ä¸»é¢˜æ€æƒ³**ï¼šæ·±å…¥åˆ†ææ–‡ç« ä¸»é¢˜
   - **æ˜“é”™ç‚¹æé†’**ï¼šæ ‡æ³¨3-5ä¸ªæ˜“é”™çŸ¥è¯†ç‚¹
4. å­—æ•°æ§åˆ¶åœ¨800-1200å­—
5. è¯­è¨€ç®€æ´æ˜“æ‡‚ï¼Œé€‚åˆåˆä¸­ç”Ÿç†è§£''',
            'version': 1,
            'is_active': True
        },
        
        # 2. æ•°å­¦çŸ¥è¯†ç‚¹æ€»ç»“æ¨¡æ¿
        {
            'template_type': 'knowledge_summary',
            'subject': 'math',
            'template_name': 'æ•°å­¦çŸ¥è¯†ç‚¹æ€»ç»“V1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­æ•°å­¦æ•™å¸ˆï¼Œæ“…é•¿å°†å¤æ‚æ¦‚å¿µç®€å•åŒ–ã€‚è¯·é’ˆå¯¹{grade}{course_name}ï¼Œç”Ÿæˆè¯¦ç»†çš„çŸ¥è¯†ç‚¹æ€»ç»“ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚æ•°å­¦è¯¾ç¨‹æ ‡å‡†
2. ä½¿ç”¨Markdownæ ¼å¼ï¼Œå…¬å¼ç”¨LaTeXè¡¨ç¤º
3. åŒ…å«ä»¥ä¸‹æ¿å—ï¼š
   - **æ ¸å¿ƒæ¦‚å¿µ**ï¼šæ¸…æ™°å®šä¹‰æœ¬èŠ‚è¯¾çš„æ ¸å¿ƒæ•°å­¦æ¦‚å¿µ
   - **å…¬å¼å®šç†**ï¼šåˆ—å‡ºæ‰€æœ‰é‡è¦å…¬å¼å’Œå®šç†ï¼Œç”¨LaTeXæ ¼å¼
   - **è§£é¢˜æ–¹æ³•**ï¼šæ€»ç»“å¸¸è§é¢˜å‹çš„è§£é¢˜æ€è·¯å’Œæ–¹æ³•
   - **å…¸å‹ä¾‹é¢˜**ï¼šç»™å‡º2-3ä¸ªå…¸å‹ä¾‹é¢˜åŠè¯¦ç»†è§£ç­”è¿‡ç¨‹
   - **æ˜“é”™ç‚¹åˆ†æ**ï¼šåˆ—å‡º3-5ä¸ªå­¦ç”Ÿå¸¸è§é”™è¯¯åŠé¿å…æ–¹æ³•
   - **çŸ¥è¯†æ‹“å±•**ï¼šé€‚å½“æ‹“å±•ç›¸å…³çŸ¥è¯†ç‚¹
4. å­—æ•°æ§åˆ¶åœ¨1000-1500å­—
5. é€»è¾‘ä¸¥å¯†ï¼Œæ­¥éª¤æ¸…æ™°''',
            'version': 1,
            'is_active': True
        },
        
        # 3. è‹±è¯­çŸ¥è¯†ç‚¹æ€»ç»“æ¨¡æ¿
        {
            'template_type': 'knowledge_summary',
            'subject': 'english',
            'template_name': 'è‹±è¯­çŸ¥è¯†ç‚¹æ€»ç»“V1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­è‹±è¯­æ•™å¸ˆï¼Œæ“…é•¿è¯­æ³•è®²è§£å’Œè¯æ±‡æ‹“å±•ã€‚è¯·é’ˆå¯¹{grade}{course_name}ï¼ˆ{unit_topic}ï¼‰ï¼Œç”Ÿæˆè¯¦ç»†çš„çŸ¥è¯†ç‚¹æ€»ç»“ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚è‹±è¯­è¯¾ç¨‹æ ‡å‡†
2. ä½¿ç”¨Markdownæ ¼å¼ï¼Œé‡ç‚¹å•è¯åŠ ç²—æ ‡æ³¨
3. åŒ…å«ä»¥ä¸‹æ¿å—ï¼š
   - **å•å…ƒä¸»é¢˜**ï¼šç®€è¦ä»‹ç»å•å…ƒä¸»é¢˜å’Œå­¦ä¹ ç›®æ ‡
   - **æ ¸å¿ƒè¯æ±‡**ï¼šåˆ—å‡º15-20ä¸ªæ ¸å¿ƒå•è¯ï¼Œæ ‡æ³¨éŸ³æ ‡ã€è¯æ€§ã€é‡Šä¹‰å’Œä¾‹å¥
   - **é‡ç‚¹çŸ­è¯­**ï¼šåˆ—å‡º8-10ä¸ªé‡ç‚¹çŸ­è¯­æ­é…
   - **è¯­æ³•é‡ç‚¹**ï¼šè¯¦ç»†è®²è§£æœ¬å•å…ƒçš„æ ¸å¿ƒè¯­æ³•ç‚¹ï¼Œé…åˆä¾‹å¥
   - **å¥å‹ç»“æ„**ï¼šæ€»ç»“3-5ä¸ªé‡ç‚¹å¥å‹
   - **å¸¸è§é”™è¯¯**ï¼šåˆ—å‡ºä¸­å›½å­¦ç”Ÿå¸¸è§çš„è¯­æ³•å’Œç”¨æ³•é”™è¯¯
   - **æ–‡åŒ–èƒŒæ™¯**ï¼šç®€è¦ä»‹ç»ç›¸å…³è‹±è¯­æ–‡åŒ–çŸ¥è¯†
4. å­—æ•°æ§åˆ¶åœ¨1000-1400å­—
5. åŒè¯­å¯¹ç…§ï¼Œè‹±æ–‡ä¾‹å¥é…ä¸­æ–‡ç¿»è¯‘''',
            'version': 1,
            'is_active': True
        },
        
        # 4. è¯­æ–‡ç»ƒä¹ é¢˜ç”Ÿæˆæ¨¡æ¿
        {
            'template_type': 'exercise_generation',
            'subject': 'chinese',
            'template_name': 'è¯­æ–‡ç»ƒä¹ é¢˜ç”ŸæˆV1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­è¯­æ–‡æ•™å¸ˆå’Œå‘½é¢˜ä¸“å®¶ã€‚è¯·é’ˆå¯¹{grade}{course_name}ï¼Œç”Ÿæˆ25é“ç»ƒä¹ é¢˜ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚ä¸­è€ƒè¯­æ–‡é¢˜å‹å’Œéš¾åº¦æ ‡å‡†
2. é¢˜å‹åˆ†å¸ƒï¼š
   - å­—è¯é€‰æ‹©é¢˜ï¼š5é“ï¼ˆæ‹¼éŸ³ã€å­—å½¢ã€è¯ä¹‰ï¼‰
   - æ–‡è¨€æ–‡é˜…è¯»é€‰æ‹©é¢˜ï¼š3é“
   - ç°ä»£æ–‡é˜…è¯»é€‰æ‹©é¢˜ï¼š2é“
   - å¡«ç©ºé¢˜ï¼š10é“ï¼ˆè¯—å¥é»˜å†™ã€æ–‡å­¦å¸¸è¯†ã€å­—è¯å¡«ç©ºï¼‰
   - ç®€ç­”é¢˜ï¼š5é“ï¼ˆé˜…è¯»ç†è§£ã€èµæé¢˜ï¼‰
3. éš¾åº¦æ¢¯åº¦ï¼šåŸºç¡€é¢˜10é“ã€ä¸­ç­‰é¢˜10é“ã€æ‹“å±•é¢˜5é“
4. æ¯é¢˜å¿…é¡»åŒ…å«ï¼šé¢˜ç›®ã€æ ‡å‡†ç­”æ¡ˆã€è¯¦ç»†è§£æ
5. é¢˜ç›®å†…å®¹ä¸é‡å¤ï¼Œéœ€æ¶µç›–è¯¾æ–‡ä¸åŒçŸ¥è¯†ç‚¹
6. ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼š

```json
{{
  "questions": [
    {{
      "id": 1,
      "type": "é€‰æ‹©é¢˜",
      "difficulty": "åŸºç¡€",
      "question": "ä¸‹åˆ—åŠ ç‚¹å­—è¯»éŸ³å®Œå…¨æ­£ç¡®çš„ä¸€é¡¹æ˜¯ï¼ˆ  ï¼‰",
      "options": ["A. é€‰é¡¹1", "B. é€‰é¡¹2", "C. é€‰é¡¹3", "D. é€‰é¡¹4"],
      "answer": "C",
      "explanation": "è¯¦ç»†è§£æå†…å®¹"
    }},
    {{
      "id": 2,
      "type": "å¡«ç©ºé¢˜",
      "difficulty": "ä¸­ç­‰",
      "question": "ã€Š{course_name}ã€‹çš„ä½œè€…æ˜¯ï¼ˆã€€ã€€ï¼‰ï¼Œä»–æ˜¯ï¼ˆã€€ã€€ï¼‰æœä»£çš„æ–‡å­¦å®¶ã€‚",
      "answer": "è«æ€€æˆšï¼›å½“ä»£",
      "explanation": "è«æ€€æˆšæ˜¯å½“ä»£ä½œå®¶ï¼Œã€Šæ•£æ­¥ã€‹æ˜¯å…¶ä»£è¡¨ä½œä¹‹ä¸€ã€‚"
    }}
  ]
}}
```''',
            'version': 1,
            'is_active': True
        },
        
        # 5. æ•°å­¦ç»ƒä¹ é¢˜ç”Ÿæˆæ¨¡æ¿
        {
            'template_type': 'exercise_generation',
            'subject': 'math',
            'template_name': 'æ•°å­¦ç»ƒä¹ é¢˜ç”ŸæˆV1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­æ•°å­¦æ•™å¸ˆå’Œå‘½é¢˜ä¸“å®¶ã€‚è¯·é’ˆå¯¹{grade}{course_name}ï¼Œç”Ÿæˆ25é“ç»ƒä¹ é¢˜ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚ä¸­è€ƒæ•°å­¦é¢˜å‹å’Œéš¾åº¦æ ‡å‡†
2. é¢˜å‹åˆ†å¸ƒï¼š
   - é€‰æ‹©é¢˜ï¼š10é“ï¼ˆå•é€‰ï¼Œæ¯é¢˜4ä¸ªé€‰é¡¹ï¼‰
   - å¡«ç©ºé¢˜ï¼š10é“ï¼ˆéœ€è¦è®¡ç®—å¾—å‡ºç­”æ¡ˆï¼‰
   - è§£ç­”é¢˜ï¼š5é“ï¼ˆéœ€è¦å®Œæ•´è§£é¢˜æ­¥éª¤ï¼‰
3. éš¾åº¦æ¢¯åº¦ï¼šåŸºç¡€é¢˜10é“ã€ä¸­ç­‰é¢˜10é“ã€æé«˜é¢˜5é“
4. æ¯é¢˜å¿…é¡»åŒ…å«ï¼šé¢˜ç›®ã€æ ‡å‡†ç­”æ¡ˆã€è¯¦ç»†è§£é¢˜æ­¥éª¤
5. é¢˜ç›®æ•°æ®è¦åˆç†ï¼Œè®¡ç®—é‡é€‚ä¸­
6. ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼ˆå…¬å¼ç”¨LaTeXè¡¨ç¤ºï¼‰ï¼š

```json
{{
  "questions": [
    {{
      "id": 1,
      "type": "é€‰æ‹©é¢˜",
      "difficulty": "åŸºç¡€",
      "question": "è‹¥ $x + 3 = 7$ï¼Œåˆ™ $x$ çš„å€¼æ˜¯ï¼ˆ  ï¼‰",
      "options": ["A. 3", "B. 4", "C. 5", "D. 10"],
      "answer": "B",
      "explanation": "ç§»é¡¹å¾— $x = 7 - 3 = 4$ï¼Œæ•…é€‰Bã€‚"
    }},
    {{
      "id": 11,
      "type": "å¡«ç©ºé¢˜",
      "difficulty": "ä¸­ç­‰",
      "question": "å·²çŸ¥æ–¹ç¨‹ $2x - 5 = 3x + 1$ï¼Œåˆ™ $x =$ _____ ã€‚",
      "answer": "-6",
      "explanation": "ç§»é¡¹åˆå¹¶åŒç±»é¡¹ï¼š$2x - 3x = 1 + 5$ï¼Œå¾— $-x = 6$ï¼Œæ‰€ä»¥ $x = -6$ã€‚"
    }},
    {{
      "id": 21,
      "type": "ç®€ç­”é¢˜",
      "difficulty": "æé«˜",
      "question": "å·²çŸ¥ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹ $3(x-2) = 2(x+1)$ï¼Œæ±‚ $x$ çš„å€¼ã€‚",
      "answer": "x = 8",
      "explanation": "è§£ï¼š\\næ­¥éª¤1ï¼šå»æ‹¬å·å¾— $3x - 6 = 2x + 2$\\næ­¥éª¤2ï¼šç§»é¡¹å¾— $3x - 2x = 2 + 6$\\næ­¥éª¤3ï¼šåˆå¹¶åŒç±»é¡¹å¾— $x = 8$\\nç­”ï¼š$x$ çš„å€¼ä¸º 8ã€‚"
    }}
  ]
}}
```''',
            'version': 1,
            'is_active': True
        },
        
        # 6. è‹±è¯­ç»ƒä¹ é¢˜ç”Ÿæˆæ¨¡æ¿
        {
            'template_type': 'exercise_generation',
            'subject': 'english',
            'template_name': 'è‹±è¯­ç»ƒä¹ é¢˜ç”ŸæˆV1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­è‹±è¯­æ•™å¸ˆå’Œå‘½é¢˜ä¸“å®¶ã€‚è¯·é’ˆå¯¹{grade}{course_name}ï¼ˆ{unit_topic}ï¼‰ï¼Œç”Ÿæˆ25é“ç»ƒä¹ é¢˜ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
{course_outline}

è¦æ±‚ï¼š
1. ç¬¦åˆä¸Šæµ·å¸‚ä¸­è€ƒè‹±è¯­é¢˜å‹å’Œéš¾åº¦æ ‡å‡†
2. é¢˜å‹åˆ†å¸ƒï¼š
   - è¯æ±‡é€‰æ‹©é¢˜ï¼š5é“ï¼ˆå•è¯æ‹¼å†™ã€è¯ä¹‰è¾¨æï¼‰
   - è¯­æ³•é€‰æ‹©é¢˜ï¼š5é“ï¼ˆæ—¶æ€ã€è¯­æ€ã€ä»å¥ç­‰ï¼‰
   - å®Œå½¢å¡«ç©ºï¼š5é“
   - å¡«ç©ºé¢˜ï¼š5é“ï¼ˆå•è¯å¡«ç©ºã€çŸ­è¯­å¡«ç©ºï¼‰
   - ç¿»è¯‘é¢˜ï¼š3é“ï¼ˆä¸­è¯‘è‹±ï¼‰
   - ç®€ç­”é¢˜ï¼š2é“ï¼ˆé˜…è¯»ç†è§£ã€å†™ä½œï¼‰
3. éš¾åº¦æ¢¯åº¦ï¼šåŸºç¡€é¢˜10é“ã€ä¸­ç­‰é¢˜10é“ã€æé«˜é¢˜5é“
4. é¢˜ç›®è¦è´´è¿‘å­¦ç”Ÿç”Ÿæ´»ï¼Œè¯­è¨€åœ°é“
5. ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼š

```json
{{
  "questions": [
    {{
      "id": 1,
      "type": "é€‰æ‹©é¢˜",
      "difficulty": "åŸºç¡€",
      "question": "â€” How do you go to school? â€” I usually go to school _____ bike.",
      "options": ["A. by", "B. on", "C. in", "D. at"],
      "answer": "A",
      "explanation": "by + äº¤é€šå·¥å…·è¡¨ç¤ºä¹˜åæŸç§äº¤é€šå·¥å…·ï¼Œby bike éª‘è‡ªè¡Œè½¦ï¼Œæ•…é€‰Aã€‚"
    }},
    {{
      "id": 16,
      "type": "å¡«ç©ºé¢˜",
      "difficulty": "ä¸­ç­‰",
      "question": "She _____ (study) English for three years.",
      "answer": "has studied/has been studying",
      "explanation": "for three years è¡¨ç¤ºä¸€æ®µæ—¶é—´ï¼Œéœ€è¦ç”¨ç°åœ¨å®Œæˆæ—¶æˆ–ç°åœ¨å®Œæˆè¿›è¡Œæ—¶ã€‚"
    }},
    {{
      "id": 24,
      "type": "ç®€ç­”é¢˜",
      "difficulty": "æé«˜",
      "question": "è¯·ç”¨50è¯å·¦å³æè¿°ä½ æœ€å–œæ¬¢çš„å­£èŠ‚åŠåŸå› ã€‚ï¼ˆMy Favorite Seasonï¼‰",
      "answer": "èŒƒæ–‡ï¼šMy favorite season is autumn. The weather is cool and comfortable. The leaves turn golden and red, which makes the scenery beautiful. I can also enjoy delicious fruits like apples and pears. Besides, autumn is the harvest season, bringing joy to farmers.",
      "explanation": "å†™ä½œè¦ç‚¹ï¼š1. æ˜ç¡®æœ€å–œæ¬¢çš„å­£èŠ‚ï¼›2. æè¿°è¯¥å­£èŠ‚çš„ç‰¹ç‚¹ï¼ˆå¤©æ°”ã€æ™¯è‰²ï¼‰ï¼›3. è¯´æ˜å–œæ¬¢çš„åŸå› ï¼›4. è¯­è¨€é€šé¡ºï¼Œæ— è¯­æ³•é”™è¯¯ã€‚"
    }}
  ]
}}
```''',
            'version': 1,
            'is_active': True
        },
        
        # 7. é€šç”¨ç­”æ¡ˆæ‰¹æ”¹æ¨¡æ¿
        {
            'template_type': 'answer_correction',
            'subject': 'all',
            'template_name': 'ç­”æ¡ˆæ‰¹æ”¹é€šç”¨æ¨¡æ¿V1',
            'template_content': '''ä½ æ˜¯ä¸€ä½èµ„æ·±çš„ä¸Šæµ·å¸‚åˆä¸­{subject_name}æ•™å¸ˆï¼Œè¯·æ‰¹æ”¹å­¦ç”Ÿçš„ç­”æ¡ˆã€‚

é¢˜ç›®ï¼š{question}
æ ‡å‡†ç­”æ¡ˆï¼š{standard_answer}
å­¦ç”Ÿç­”æ¡ˆï¼š{student_answer}

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ ‡å‡†æ‰¹æ”¹ï¼š
1. å‡†ç¡®åˆ¤æ–­å­¦ç”Ÿç­”æ¡ˆçš„æ­£ç¡®æ€§ï¼ˆ0-100åˆ†ï¼‰
2. æŒ‡å‡ºç­”æ¡ˆä¸­çš„ä¼˜ç‚¹å’Œä¸è¶³
3. å¦‚æœæœ‰é”™è¯¯ï¼Œè¯¦ç»†è¯´æ˜é”™åœ¨å“ªé‡Œ
4. ç»™å‡ºæ”¹è¿›å»ºè®®å’Œæ­£ç¡®çš„è§£é¢˜æ€è·¯
5. è¯­æ°”è¦æ¸©å’Œé¼“åŠ±ï¼Œç¬¦åˆæ•™å¸ˆèº«ä»½

ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¿”å›ï¼š
```json
{{
  "score": 85,
  "is_correct": true,
  "strengths": ["ä¼˜ç‚¹1ï¼šç­”é¢˜æ€è·¯æ­£ç¡®", "ä¼˜ç‚¹2ï¼šæ­¥éª¤å®Œæ•´"],
  "weaknesses": ["ä¸è¶³1ï¼šè¡¨è¿°ä¸å¤Ÿç®€æ´", "ä¸è¶³2ï¼šä¸ªåˆ«ç»†èŠ‚æœ‰è¯¯"],
  "detailed_feedback": "ä½ çš„ç­”æ¡ˆæ•´ä½“æ€è·¯æ­£ç¡®ï¼Œèƒ½å¤ŸæŠ“ä½é¢˜ç›®çš„æ ¸å¿ƒè¦ç‚¹ã€‚ä½†åœ¨å…·ä½“è¡¨è¿°ä¸Šè¿˜éœ€è¦æ›´åŠ ç²¾ç‚¼...",
  "suggestion": "å»ºè®®ï¼š1. å¤šè¯»å‡ éæ ‡å‡†ç­”æ¡ˆï¼Œå­¦ä¹ å…¶è¡¨è¿°æ–¹å¼ï¼›2. æ³¨æ„å…³é”®è¯çš„ä½¿ç”¨ï¼›3. åŠ å¼ºç›¸å…³çŸ¥è¯†ç‚¹çš„å¤ä¹ ã€‚",
  "correct_solution": "ï¼ˆå¦‚æœç­”æ¡ˆæœ‰è¯¯ï¼Œè¿™é‡Œç»™å‡ºå®Œæ•´çš„æ­£ç¡®è§£ç­”æ­¥éª¤ï¼‰"
}}
```''',
            'version': 1,
            'is_active': True
        }
    ]
    
    print("å¼€å§‹å¯¼å…¥Promptæ¨¡æ¿...")
    print("=" * 60)
    
    created_count = 0
    updated_count = 0
    
    for template_data in templates:
        # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
        existing = PromptTemplate.objects.filter(
            template_type=template_data['template_type'],
            subject=template_data['subject'],
            version=template_data['version']
        ).first()
        
        if existing:
            # æ›´æ–°å·²å­˜åœ¨çš„æ¨¡æ¿
            for key, value in template_data.items():
                setattr(existing, key, value)
            existing.save()
            print(f"âœ… æ›´æ–°æ¨¡æ¿: {template_data['template_name']}")
            updated_count += 1
        else:
            # åˆ›å»ºæ–°æ¨¡æ¿
            PromptTemplate.objects.create(**template_data)
            print(f"âœ… åˆ›å»ºæ¨¡æ¿: {template_data['template_name']}")
            created_count += 1
    
    print("=" * 60)
    print(f"å¯¼å…¥å®Œæˆï¼")
    print(f"  - æ–°åˆ›å»º: {created_count} ä¸ªæ¨¡æ¿")
    print(f"  - æ›´æ–°: {updated_count} ä¸ªæ¨¡æ¿")
    print(f"  - æ€»è®¡: {created_count + updated_count} ä¸ªæ¨¡æ¿")
    print()
    print("ç°åœ¨å¯ä»¥åœ¨Adminåå°æŸ¥çœ‹:")
    print("http://localhost:8000/admin/ai_services/prompttemplate/")


if __name__ == '__main__':
    try:
        create_prompt_templates()
        print()
        print("ğŸ‰ æ‰€æœ‰Promptæ¨¡æ¿å¯¼å…¥æˆåŠŸï¼")
    except Exception as e:
        print(f"âŒ å¯¼å…¥å¤±è´¥: {str(e)}")
        import traceback
        traceback.print_exc()


